<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Pasarela Pagos</title>
        <script src="https://www.google.com/recaptcha/api.js"></script>
    </h:head>
    <h:body>
        
     <h:form id="form">
        <h:panelGrid columns="2" cellpadding="7" styleClass="p-mb-3">
           
             <h:outputLabel for="nombreCliente" value="Nombre Cliente:" />
            <p:inputText id="nombreCliente" value="#{pagosMBean.nombreCliente}" required="true"/>
            
             <h:outputLabel for="cedulaCliente" value="Cedula Cliente:" />
            <p:inputText id="cedulaCliente" value="#{pagosMBean.cedulaCliente}" required="true"/>
            
             <h:outputLabel for="email" value="Email:" />
            <p:inputText id="email" value="#{pagosMBean.email}" required="true" validatorMessage="Email is invalid.">
                <f:validateRegex pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}" />
            </p:inputText>
            
             <h:outputLabel for="numTarjeta" value="Numero Tarjeta:" />
             <p:inputMask id="numTarjeta" value="#{pagosMBean.numTarjeta}" mask="9999-9999-9999-9999" required="true" >
                 <p:ajax event="keyup" update="tipoTarjeta" listener="#{pagosMBean.validarNumTarjeta}" process="@this" global="false"></p:ajax>
             </p:inputMask>
             
            <p:outputLabel for="fechaVen" value="Fecha Ven:"/>
            <p:inputMask id="fechaVen" value="#{pagosMBean.fechaVen}" mask="99/9999" required="true" >
                 <p:ajax event="keyup" listener="#{pagosMBean.validarFecha}" process="@this" global="false"></p:ajax>
             </p:inputMask>
            
            <h:outputLabel for="cvv" value="cvv:" />
            <p:inputNumber id="cvv" value="#{pagosMBean.cvv}" maxValue="999" decimalPlaces="0" required="true"  size="3" >
                 <p:ajax event="keyup" update="tipoTarjeta" listener="#{pagosMBean.validarCVV}" process="@this" global="false"></p:ajax>
            </p:inputNumber>
            
            <h:outputLabel for="tipoTarjeta" value="Tipo Tarjeta" />
            <h:outputText id="tipoTarjeta" value="#{pagosMBean.tipoTarjeta}"/>
            
            <h:outputLabel for="cantidad" value="cantidad" />
            <p:inputNumber id="cantidad" value="#{pagosMBean.cantidad}" required="true" maxValue="10000" symbol=" COP" decimalSeparator="," thousandSeparator="." symbolPosition="s" decimalPlaces="0"/>
        </h:panelGrid>
         
                  
         <!--<p:captcha id="captcha"></p:captcha>--> <!-- Comentado debido a problemas con certificados de seguridad-->
         <p:messages id="messages" showDetail="true" closable="true"></p:messages>
         <p:commandButton value="Pagar" id="btn1" action="#{pagosMBean.guardarPago()}" ajax="false" styleClass="p-mr-2"/>
         
    </h:form>

    </h:body>
</html>

